$(document).ready(function(){$(window).width()>"767"&&($(".parent-elem").hover(function(){clearTimeout($.data(this,"timer"));var e=($(this).children("ul.second-level").width()-$(this).width())/-2;$("ul.second-level").css("left",e),$("ul.second-level",this).stop(!0,!0).slideDown(250)},function(){$.data(this,"timer",setTimeout($.proxy(function(){$("ul.second-level",this).stop(!0,!0).hide(250)},this),50))}),$(".second-parent-elem").hover(function(){clearTimeout($.data(this,"timer")),$("ul.third-level",this).stop(!0,!0).slideDown(250)},function(){$.data(this,"timer",setTimeout($.proxy(function(){$("ul.third-level",this).stop(!0,!0).hide(250)},this),50))})),$(window).width()<="767"&&($(".parent-elem>a").click(function(e){e.preventDefault(),$(".second-level").not($(this).next()).slideUp(300),$(this).next().slideToggle(300)}),$(".second-parent-elem>a").click(function(e){e.preventDefault(),$(".third-level").not($(this).next()).slideUp(150),$(this).next().slideToggle(150)})),$("a.go").click(function(e){e.preventDefault(),$("#overlay").fadeIn(400,function(){$("#modal_form").css("display","block").animate({opacity:1,top:"50%"},200)})}),$("#modal_close, #overlay").click(function(){$("#modal_form").animate({opacity:0,top:"45%"},200,function(){$(this).css("display","none"),$("#overlay").fadeOut(400)})});var e=130,t="...",s="Показать полностью",n="Скрыть текст";$(".more").each(function(){var n=$(this).html();if(n.length>e){var i=n.substr(0,e),l=n.substr(e,n.length-e),o=i+'<span class="moreellipses">'+t+'&nbsp;</span><span class="morecontent"><span>'+l+'</span>&nbsp;&nbsp;<a href="" class="morelink">'+s+"</a></span>";$(this).html(o)}}),$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html(s)):($(this).addClass("less"),$(this).html(n)),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1}),$(".button-open-list").click(function(){$(this).parent().toggleClass("open");var e=$(this).text();$(this).text("Показать полностью"==e?"Скрыть":"Показать полностью")}),$(".filters-wrap__head").click(function(){$(this).parent().toggleClass("open"),$(".list-filters").slideToggle(300)}),$(".left-nav p").click(function(){$(window).width()<="767"&&($(this).next().slideToggle(0),$(this).parent().toggleClass("open"),$(".refresh-filters").appendTo($(this).parent()))}),$(".category-list-wrap__head").click(function(){$(this).parent().toggleClass("open"),$(".category-list-nav").slideToggle(300)})}),$(".close-input").click(function(){$(".search").removeClass("opened"),$(".search input").val(""),$(".search input").attr("placeholder","Поиск по каталогу"),$(".curtain").slideUp(300),$("body").removeClass("open-curtain")}),$(".read-more").click(function(){$(this).prev(".features").toggleClass("open");var e=$(".read-more").text();$(this).text("Все особенности"==e?"Скрыть особенности":"Все особенности")}),$(".search input").focus(function(){$(".search").addClass("opened"),$(this).attr("placeholder","Начните вводить название товара или услуги..."),$(window).width()>"767"&&($(".curtain").slideDown(300),$("body").addClass("open-curtain"))}),$(".plus").click(function(){var e=$(this).prev().val();$(this).prev().val(++e)}),$(".offer__remove").click(function(){$(this).parent().hide(300)}),$(".minus").click(function(){var e=$(this).next().val();e>1&&$(this).next().val(--e)}),$(".open__more").click(function(){$(this).prev().toggleClass("open");var e=$(".open__more").text();$(this).text("Все характеристики"==e?"Скрыть характеристики":"Все характеристики")}),$(".button-add-to-cart").click(function(e){e.preventDefault(),$(this).toggleClass("open");var t=$(this).text();$(this).text("В корзину"==t?"Добавлен":"В корзину")}),$(document).mouseup(function(e){var t=$(".search");t.is(e.target)||0!==t.has(e.target).length||($(".search").removeClass("opened"),$(".search input").attr("placeholder","Поиск по каталогу"),$(".curtain").slideUp(300),$("body").removeClass("open-curtain"))});var wrapperMenu=document.querySelector(".wrapper-menu");wrapperMenu.addEventListener("click",function(){wrapperMenu.classList.toggle("open"),$(".head-menu").slideToggle(300),$(".head-menu").toggleClass("open")}),$("input[type=checkbox]").styler(),$(window).width()>"767"&&$(".history-list__text ul").each(function(){var e=$(this).children("li").length;console.log(e),e>2&&($(this).parent().append("<p class='button-open-list'>Показать полностью</p>"),$(this).addClass("toggled"))});